# ═══════════════════════════════════════════════════════════════════════════════
# Coverage Testing Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# Copy to config.env and update the values below.
# See detailed documentation at the end of this file.

# ─────────────────────────────────────────────────────────────────────────────
# REQUIRED: Basic Configuration
# ─────────────────────────────────────────────────────────────────────────────

DOMAIN="your-cluster.your-domain.com"
CLUSTER_ISSUER="letsencrypt-production"

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: OIDC/JWT Authentication (for Tests 22, 26, 27)
# ─────────────────────────────────────────────────────────────────────────────
# Uncomment and configure if testing OIDC or JWT authentication.

# OIDC_ISSUER_URL="https://sts.windows.net/<your-tenant-id>/"
# OIDC_CLIENT_ID="your-client-id"
# OIDC_JWKS_URL="https://login.microsoftonline.com/<your-tenant-id>/discovery/keys"
# OIDC_PROVIDER_HOST="login.microsoftonline.com"

# ═══════════════════════════════════════════════════════════════════════════════
#
#                           DOCUMENTATION
#
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Prerequisites
# ─────────────────────────────────────────────────────────────────────────────
#   - Kubernetes cluster with LoadBalancer support
#   - cert-manager installed with a working ClusterIssuer
#   - No external-dns required (tests use curl --resolve)

# ─────────────────────────────────────────────────────────────────────────────
# DOMAIN
# ─────────────────────────────────────────────────────────────────────────────
# The domain suffix for test hostnames.
# Examples: i2g.${DOMAIN}, eg.${DOMAIN}, nginx-passthrough.${DOMAIN}

# ─────────────────────────────────────────────────────────────────────────────
# CLUSTER_ISSUER
# ─────────────────────────────────────────────────────────────────────────────
# cert-manager ClusterIssuer name (e.g., letsencrypt-production, letsencrypt-staging)

# ─────────────────────────────────────────────────────────────────────────────
# OIDC_ISSUER_URL
# ─────────────────────────────────────────────────────────────────────────────
# OpenID Connect issuer URL. Must EXACTLY match the "iss" claim in JWT tokens.
#
# ⚠️  Azure AD Note: Tokens can be v1 or v2 format:
#     v1: iss = "https://sts.windows.net/<tenant-id>/"
#     v2: iss = "https://login.microsoftonline.com/<tenant-id>/v2.0"
#
# To check your token's issuer:
#   TOKEN=$(az account get-access-token --resource <client-id> --query accessToken -o tsv)
#   echo $TOKEN | cut -d. -f2 | base64 -d 2>/dev/null | jq -r '.iss'
#
# Examples by provider:
#   Azure AD v1: https://sts.windows.net/<tenant-id>/
#   Azure AD v2: https://login.microsoftonline.com/<tenant-id>/v2.0
#   Google:      https://accounts.google.com
#   Okta:        https://<org>.okta.com
#   Keycloak:    https://<host>/realms/<realm>
#   Auth0:       https://<tenant>.<region>.auth0.com

# ─────────────────────────────────────────────────────────────────────────────
# OIDC_CLIENT_ID
# ─────────────────────────────────────────────────────────────────────────────
# The client/application ID registered with your OIDC provider.
# Used as the "audience" (aud) claim for JWT validation.

# ─────────────────────────────────────────────────────────────────────────────
# OIDC_JWKS_URL
# ─────────────────────────────────────────────────────────────────────────────
# JSON Web Key Set URL for JWT signature verification.
# Usually auto-derived from issuer, but can be specified explicitly.
#
# Examples by provider:
#   Azure AD v1: https://login.microsoftonline.com/<tenant-id>/discovery/keys
#   Azure AD v2: https://login.microsoftonline.com/<tenant-id>/discovery/v2.0/keys
#   Google:      https://www.googleapis.com/oauth2/v3/certs
#   Okta:        https://<org>.okta.com/oauth2/v1/keys

# ─────────────────────────────────────────────────────────────────────────────
# OIDC_PROVIDER_HOST
# ─────────────────────────────────────────────────────────────────────────────
# OIDC provider hostname (without https://). Required for KGateway's Backend resource.
#
# Examples:
#   Azure AD:  login.microsoftonline.com
#   Google:    accounts.google.com
#   Okta:      <org>.okta.com

# ─────────────────────────────────────────────────────────────────────────────
# OIDC Client Secret (Kubernetes Secret)
# ─────────────────────────────────────────────────────────────────────────────
# For OIDC authentication (Test 22), create a secret with your client secret:
#
#   kubectl create secret generic oidc-client-secret \
#     --from-literal=client-secret=<YOUR_CLIENT_SECRET> \
#     -n ingress2kgateway    # or ingress2envoygateway
#
# Note: JWT validation (Test 26/27) does NOT require the client secret.
